<p-tree [value]="treeViewService.items">
  <ng-template let-node  pTemplate="default">

    <span class="me-auto"
          (dblclick)="treeViewService.showEditor(node.id, node)"
          (click)="treeViewService.selectItem(node)"
          [ngClass]="{'selected': treeViewService.itemList?.id === node.id}"
          [hidden]="node.id==treeViewService.editItem"
          >{{node.label}}</span>
    <input class="form-control edit-input"
           type="text" [(ngModel)]="node.label" *ngIf="node.id==treeViewService.editItem"
           (keydown.control.q)="treeViewService.addChild('')"
           (keydown.control.enter)="treeViewService.addRoot('')"
           (keydown.control.d)="treeViewService.removeItem('')"
           (keydown.control.shift.s)="treeViewService.openAutoFillCase()"
           (keydown.enter)="treeViewService.controlEnter()"
           (clickOutside)="treeViewService.onClickedOutsideTree($event)" [attachOutsideOnClick]="true">
<!--    (clickOutside)="treeViewService.onClickedOutsideTree($event)" [attachOutsideOnClick]="true"-->

    <app-auto-fill-case [hidden]="treeViewService.isAutoFill" *ngIf="treeViewService?.itemList?.id == node.id"></app-auto-fill-case>
    <app-open-specs></app-open-specs>

<!--    <a [hidden]="treeViewService.isShowId" (click)="treeViewService.saveSpecs()">{{node.id}}</a>-->
<!--    <a [hidden]="treeViewService.isShowId">{{node.id}}</a>-->
<!--    <a class="icon-flag-o"></a>-->
<!--    <a class="icon-chat"></a>-->

    <div class="dropdown setting" (click)="treeViewService.selectItem(node)" (clickOutside)="onClickedOutside($event)" [attachOutsideOnClick]="true" [ngClass]="{'show': caseDropdown}">
      <a (click)="caseDropdown = !caseDropdown">
        <i class="icon-cog"></i>
        <i class="icon-caret-down-two"></i>
      </a>
      <div class="dropdown-menu" *ngIf="treeViewService?.itemList?.id == node.id" [ngClass]="{'show': caseDropdown}">
        <a class="dropdown-item" href="javascript:">Object Id: {{node.id}}</a>
        <a class="dropdown-item" href="javascript:">Create Feedback</a>
        <a class="dropdown-item" href="javascript:">Insert Comment</a>
        <a class="dropdown-item" href="javascript:" (click)="treeViewService.saveSpecs()">View Properties</a>
      </div>
    </div>

  </ng-template>
</p-tree>
